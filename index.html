<!DOCTYPE html>
<html lang="en">
<!-- Version: 2026-01-04-16:10 - CACHE BUST -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout Tracker - Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-card: #ffffff;
            --text-primary: #000000;
            --text-secondary: #666666;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --accent-light: #60a5fa;
            --border: #e5e5e5;
            --shadow: rgba(0, 0, 0, 0.1);
            --danger: #ef4444;
            --warning: #f59e0b;
            --body-bg: #ffffff;
            --body-gradient-1: #f0f0f0;
            --body-gradient-2: #ffffff;
            --grid-color: rgba(59, 130, 246, 0.03);
            --tech-line-color: rgba(59, 130, 246, 0.5);
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-border: rgba(59, 130, 246, 0.15);
            --auth-bg: rgba(255, 255, 255, 0.98);
            --nav-bg: rgba(250, 250, 250, 0.95);
            
            /* Gym Theme Colors - Default: Professional Clean (Blue) */
            --gym-rack-color: #2d3748;
            --gym-accent-1: #3b82f6;
            --gym-accent-2: #60a5fa;
            --gym-accent-3: #93c5fd;
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-card: #242424;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --accent-light: #60a5fa;
            --border: #404040;
            --shadow: rgba(0, 0, 0, 0.3);
            --danger: #ef4444;
            --warning: #f59e0b;
            --body-bg: #000000;
            --body-gradient-1: #0a0a0a;
            --body-gradient-2: #000000;
            --grid-color: rgba(59, 130, 246, 0.03);
            --tech-line-color: rgba(59, 130, 246, 0.5);
            --card-bg: rgba(26, 26, 26, 0.8);
            --card-border: rgba(59, 130, 246, 0.15);
            --auth-bg: rgba(26, 26, 26, 0.98);
            --nav-bg: rgba(10, 10, 10, 0.95);
            
            --gym-rack-color: #1a202c;
            --gym-accent-1: #2563eb;
            --gym-accent-2: #3b82f6;
            --gym-accent-3: #60a5fa;
        }

        /* Gym Theme: Powerlifting (Red/Orange) */
        [data-gym-theme="powerlifting"] {
            --accent: #dc2626;
            --accent-hover: #b91c1c;
            --accent-light: #f97316;
            --grid-color: rgba(220, 38, 38, 0.03);
            --tech-line-color: rgba(220, 38, 38, 0.5);
            --card-border: rgba(220, 38, 38, 0.15);
            --gym-rack-color: #1a1a1a;
            --gym-accent-1: #dc2626;
            --gym-accent-2: #f97316;
            --gym-accent-3: #fb923c;
        }

        /* Gym Theme: Functional Training (Multi-color) */
        [data-gym-theme="functional"] {
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --accent-light: #f97316;
            --grid-color: rgba(59, 130, 246, 0.03);
            --tech-line-color: rgba(59, 130, 246, 0.5);
            --card-border: rgba(59, 130, 246, 0.15);
            --gym-rack-color: #1e293b;
            --gym-accent-1: #3b82f6;
            --gym-accent-2: #f97316;
            --gym-accent-3: #8b5cf6;
        }

        /* Gym Theme: Boxing/MMA (Dark + Yellow) */
        [data-gym-theme="boxing"] {
            --accent: #eab308;
            --accent-hover: #ca8a04;
            --accent-light: #fbbf24;
            --grid-color: rgba(234, 179, 8, 0.03);
            --tech-line-color: rgba(234, 179, 8, 0.5);
            --card-border: rgba(234, 179, 8, 0.15);
            --gym-rack-color: #0f172a;
            --gym-accent-1: #eab308;
            --gym-accent-2: #fbbf24;
            --gym-accent-3: #fcd34d;
        }

        /* Gym Theme: CrossFit (Grayscale + Cyan) */
        [data-gym-theme="crossfit"] {
            --accent: #06b6d4;
            --accent-hover: #0891b2;
            --accent-light: #22d3ee;
            --grid-color: rgba(6, 182, 212, 0.03);
            --tech-line-color: rgba(6, 182, 212, 0.5);
            --card-border: rgba(6, 182, 212, 0.15);
            --gym-rack-color: #374151;
            --gym-accent-1: #06b6d4;
            --gym-accent-2: #22d3ee;
            --gym-accent-3: #67e8f9;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--body-bg);
            color: var(--text-primary);
            transition: background 0.5s, color 0.5s;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, var(--body-gradient-1) 0%, var(--body-gradient-2) 50%, var(--body-gradient-1) 100%);
            opacity: 0.7;
            z-index: -3;
            transition: background 0.5s;
        }

        /* Realistic gym photo background */
        .gym-photo-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=1920&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.35;
            animation: gymPhotoMove 45s ease-in-out infinite;
            filter: blur(1px) grayscale(30%);
        }

        [data-theme="light"] .gym-photo-bg {
            opacity: 0.25;
            filter: blur(2px) grayscale(40%) brightness(1.2);
        }

        @keyframes gymPhotoMove {
            0%, 100% {
                transform: scale(1) translateX(0);
            }
            33% {
                transform: scale(1.05) translateX(-2%);
            }
            66% {
                transform: scale(1.08) translateX(2%);
            }
        }

        /* Weight rack silhouettes - Realistic Gym Equipment */
        .gym-racks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 1;
        }

        .rack-left, .rack-right {
            position: absolute;
            width: 80px;
            height: 55%;
            top: 22%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                var(--gym-rack-color) 15%, 
                var(--gym-rack-color) 20%,
                transparent 20%,
                transparent 35%,
                var(--gym-rack-color) 40%,
                var(--gym-rack-color) 45%,
                transparent 45%,
                transparent 60%,
                var(--gym-rack-color) 65%,
                var(--gym-rack-color) 70%,
                transparent 70%,
                transparent 85%,
                var(--gym-rack-color) 90%,
                var(--gym-rack-color) 95%,
                transparent 95%
            );
            animation: rackSway 12s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.5));
        }

        .rack-left {
            left: 5%;
        }

        .rack-right {
            right: 5%;
            animation-delay: -6s;
        }

        @keyframes rackSway {
            0%, 100% {
                transform: translateY(0) scaleY(1);
            }
            50% {
                transform: translateY(-10px) scaleY(1.02);
            }
        }

        /* Gym zone marker lines - Blue accent wires */
        .gym-mirror {
            position: fixed;
            top: 15%;
            left: 10%;
            right: 10%;
            height: 40%;
            background: transparent;
            z-index: -1;
            border: none;
            animation: none;
            box-shadow: none;
        }

        .gym-mirror::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gym-accent-1), transparent);
            box-shadow: 0 0 10px var(--gym-accent-1);
            animation: wirePulse 3s ease-in-out infinite;
        }

        .gym-mirror::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gym-accent-2), transparent);
            box-shadow: 0 0 10px var(--gym-accent-2);
            animation: wirePulse 3s ease-in-out infinite 1.5s;
        }

        @keyframes wirePulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Bench press - Realistic equipment with blue safety lights */
        .gym-bench {
            position: fixed;
            bottom: 35%;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 80px;
            z-index: -1;
            opacity: 1;
        }

        .bench-base {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 15px;
            background: var(--gym-rack-color);
            border-radius: 3px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .bench-bar {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 8px;
            background: var(--gym-rack-color);
            border-radius: 2px;
            animation: barLift 6s ease-in-out infinite;
            box-shadow: 0 0 8px var(--gym-accent-1);
        }

        .bench-plate {
            position: absolute;
            top: -5px;
            width: 30px;
            height: 30px;
            border: 3px solid var(--gym-rack-color);
            background: var(--gym-accent-1);
            border-radius: 50%;
            box-shadow: 0 0 15px var(--gym-accent-1);
            animation: plateSpin 8s linear infinite;
        }

        @keyframes plateSpin {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .bench-plate:nth-child(1) { left: 10px; }
        .bench-plate:nth-child(2) { right: 10px; }

        @keyframes barLift {
            0%, 100% { 
                transform: translateX(-50%) translateY(0);
            }
            50% { 
                transform: translateX(-50%) translateY(-15px);
            }
        }

        /* Dumbbell rack - Realistic gym equipment */
        .dumbbell-row {
            position: fixed;
            bottom: 15%;
            left: 15%;
            right: 15%;
            height: 40px;
            z-index: -1;
            opacity: 1;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .dumbbell {
            width: 60px;
            height: 18px;
            background: linear-gradient(90deg,
                var(--gym-rack-color) 0%,
                var(--gym-rack-color) 25%,
                transparent 25%,
                transparent 75%,
                var(--gym-rack-color) 75%,
                var(--gym-rack-color) 100%
            );
            border-radius: 10px;
            animation: dumbbellPulse 4s ease-in-out infinite;
            box-shadow: 0 0 8px var(--gym-accent-2);
            position: relative;
        }

        .dumbbell::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 22%;
            width: 56%;
            height: 4px;
            background: var(--gym-accent-1);
            transform: translateY(-50%);
            box-shadow: 0 0 6px var(--gym-accent-1);
        }

        .dumbbell:nth-child(2) { animation-delay: -1s; }
        .dumbbell:nth-child(3) { animation-delay: -2s; }
        .dumbbell:nth-child(4) { animation-delay: -3s; }

        @keyframes dumbbellPulse {
            0%, 100% { 
                opacity: 0.8;
                box-shadow: 0 0 8px var(--gym-accent-2);
            }
            50% { 
                opacity: 1;
                box-shadow: 0 0 15px var(--gym-accent-1);
            }
        }

        .gym-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.15;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    var(--grid-color) 0px,
                    var(--grid-color) 1px,
                    transparent 1px,
                    transparent 40px
                ),
                repeating-linear-gradient(
                    90deg,
                    var(--grid-color) 0px,
                    var(--grid-color) 1px,
                    transparent 1px,
                    transparent 40px
                );
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% {
                transform: translate(0, 0);
            }
            100% {
                transform: translate(40px, 40px);
            }
        }

        .tech-lines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .tech-line {
            position: absolute;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--tech-line-color), transparent);
            animation: techLineMove 8s linear infinite;
        }

        @keyframes techLineMove {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(200%);
            }
        }

        .tech-line:nth-child(1) { top: 20%; animation-delay: 0s; }
        .tech-line:nth-child(2) { top: 40%; animation-delay: 2s; }
        .tech-line:nth-child(3) { top: 60%; animation-delay: 4s; }
        .tech-line:nth-child(4) { top: 80%; animation-delay: 6s; }

        .gym-equipment {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            opacity: 0.12;
        }

        /* Simulated gym background with moving elements */
        .gym-visual {
            position: absolute;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, var(--gym-accent-1) 0%, transparent 50%),
                radial-gradient(circle at 80% 30%, var(--gym-accent-2) 0%, transparent 40%),
                radial-gradient(circle at 50% 80%, var(--gym-accent-3) 0%, transparent 35%);
            animation: gymAmbient 15s ease-in-out infinite;
            opacity: 0.08;
        }

        @keyframes gymAmbient {
            0%, 100% { 
                transform: scale(1) translateX(0);
                opacity: 0.12;
            }
            50% { 
                transform: scale(1.1) translateX(20px);
                opacity: 0.18;
            }
        }

        .equipment-item {
            position: absolute;
            opacity: 0.4;
            animation: floatEquipment 25s linear infinite;
        }

        /* Dumbbell shapes */
        .equipment-item:nth-child(1),
        .equipment-item:nth-child(5) {
            width: 80px;
            height: 20px;
            background: linear-gradient(90deg, 
                var(--accent) 0%, var(--accent) 25%, 
                transparent 25%, transparent 75%, 
                var(--accent) 75%, var(--accent) 100%);
            border-radius: 10px;
        }

        /* Barbell plates */
        .equipment-item:nth-child(2),
        .equipment-item:nth-child(6) {
            width: 60px;
            height: 60px;
            border: 8px solid var(--accent);
            border-radius: 50%;
        }

        /* Kettlebell shape */
        .equipment-item:nth-child(3),
        .equipment-item:nth-child(7) {
            width: 50px;
            height: 50px;
            background: var(--accent);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
        }

        /* Weight plate hexagon */
        .equipment-item:nth-child(4),
        .equipment-item:nth-child(8) {
            width: 70px;
            height: 70px;
            background: var(--accent);
            clip-path: polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%);
        }

        @keyframes floatEquipment {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            90% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }

        .equipment-item:nth-child(1) { left: 10%; animation-duration: 20s; animation-delay: 0s; }
        .equipment-item:nth-child(2) { left: 30%; animation-duration: 25s; animation-delay: 3s; }
        .equipment-item:nth-child(3) { left: 50%; animation-duration: 22s; animation-delay: 6s; }
        .equipment-item:nth-child(4) { left: 70%; animation-duration: 28s; animation-delay: 9s; }
        .equipment-item:nth-child(5) { left: 85%; animation-duration: 24s; animation-delay: 12s; }
        .equipment-item:nth-child(6) { left: 15%; animation-duration: 26s; animation-delay: 5s; }
        .equipment-item:nth-child(7) { left: 60%; animation-duration: 23s; animation-delay: 8s; }
        .equipment-item:nth-child(8) { left: 40%; animation-duration: 27s; animation-delay: 11s; }

        /* Moving shadow effects simulating people/movement */
        .gym-shadows {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.06;
        }

        .shadow-person {
            position: absolute;
            bottom: 0;
            width: 100px;
            height: 200px;
            background: linear-gradient(180deg, transparent 0%, var(--accent) 50%, transparent 100%);
            filter: blur(30px);
            animation: personMove 20s linear infinite;
        }

        @keyframes personMove {
            0% {
                left: -100px;
                transform: scaleX(1);
            }
            50% {
                transform: scaleX(0.7);
            }
            100% {
                left: 100%;
                transform: scaleX(1);
            }
        }

        .shadow-person:nth-child(1) { animation-duration: 25s; animation-delay: 0s; }
        .shadow-person:nth-child(2) { animation-duration: 30s; animation-delay: 8s; }
        .shadow-person:nth-child(3) { animation-duration: 28s; animation-delay: 15s; }

        /* Gym floor reflection effect */
        .gym-floor {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(180deg, transparent 0%, var(--gym-accent-1) 100%);
            opacity: 0.03;
            z-index: -1;
            animation: floorShimmer 8s ease-in-out infinite;
        }

        @keyframes floorShimmer {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .pulse-ring {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            border: 2px solid var(--accent);
            border-radius: 50%;
            opacity: 0;
            z-index: -1;
            animation: pulseRing 4s ease-out infinite;
        }

        @keyframes pulseRing {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0.5;
            }
            100% {
                transform: translate(-50%, -50%) scale(3);
                opacity: 0;
            }
        }

        .pulse-ring:nth-child(2) { animation-delay: 1s; }
        .pulse-ring:nth-child(3) { animation-delay: 2s; }
        .pulse-ring:nth-child(4) { animation-delay: 3s; }

        .auth-container {
            background: var(--auth-bg);
            border-radius: 4px;
            padding: 50px 40px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 0 40px var(--accent), inset 0 0 60px var(--accent);
            border: 1px solid var(--accent);
            position: relative;
            overflow: hidden;
            transition: background 0.5s, box-shadow 0.5s;
        }

        .auth-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            animation: borderSweep 3s ease-in-out infinite;
        }

        @keyframes borderSweep {
            0%, 100% {
                left: -100%;
            }
            50% {
                left: 100%;
            }
        }

        .auth-logo {
            text-align: center;
            font-size: 14px;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 4px;
            font-weight: 700;
            color: var(--accent);
            border-bottom: 2px solid var(--accent);
            padding-bottom: 15px;
        }

        .auth-title {
            text-align: center;
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: 1px;
            transition: color 0.5s;
        }

        .auth-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 40px;
            font-size: 14px;
            letter-spacing: 0.5px;
            transition: color 0.5s;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 12px;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            border-radius: 2px;
            border: 1px solid var(--accent);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 15px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            background: var(--bg-primary);
        }

        .form-input::placeholder {
            color: var(--text-secondary);
        }

        .btn {
            width: 100%;
            padding: 16px;
            border-radius: 2px;
            border: none;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
            color: white;
            box-shadow: 0 4px 20px var(--accent);
            opacity: 0.5;
        }

        .btn-primary:hover {
            box-shadow: 0 6px 30px var(--accent);
            opacity: 0.7;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .btn-secondary:hover {
            background: var(--accent);
            opacity: 0.15;
            box-shadow: 0 0 20px var(--accent);
            opacity: 0.3;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            text-align: center;
            border: 1px solid var(--danger);
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            text-align: center;
            border: 1px solid var(--accent);
        }

        .divider {
            text-align: center;
            margin: 20px 0;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .app-container {
            display: none;
        }

        .app-container.active {
            display: block;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 150px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--accent);
            opacity: 0.3;
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 2px;
            color: var(--text-primary);
            transition: color 0.5s;
        }

        .streak-display {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            color: var(--accent);
            font-weight: 700;
            margin: 15px 0;
            padding: 12px 24px;
            background: var(--accent);
            opacity: 0.12;
            border: 1px solid var(--accent);
            opacity: 0.4;
            border-radius: 2px;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .streak-flame {
            font-size: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 2px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--card-border);
            position: relative;
            transition: background 0.5s, border 0.5s;
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, transparent, var(--accent), transparent);
        }

        .card h2, .card h3 {
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: 1px;
            transition: color 0.5s;
        }

        .card h3 {
            font-size: 16px;
            text-transform: uppercase;
        }

        .exercise-item {
            background: var(--bg-secondary);
            border-radius: 2px;
            padding: 18px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            position: relative;
        }

        .exercise-item:hover {
            border-left-color: var(--accent);
            background: var(--accent);
            opacity: 0.08;
            box-shadow: 0 0 20px var(--accent);
            opacity: 0.15;
        }

        .exercise-item.active {
            border-left-color: var(--accent);
            background: var(--accent);
            opacity: 0.2;
            box-shadow: 0 0 30px var(--accent);
            opacity: 0.4;
        }

        .exercise-item.completed {
            opacity: 0.5;
            border-left-color: var(--accent-hover);
            background: var(--accent-hover);
            opacity: 0.15;
        }

        .exercise-name {
            font-weight: 700;
            font-size: 15px;
            color: var(--text-primary);
            letter-spacing: 0.5px;
            transition: color 0.5s;
        }

        .exercise-target {
            font-size: 13px;
            color: var(--accent);
            font-weight: 500;
        }

        .exercise-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .exercise-name {
            font-weight: 600;
            font-size: 16px;
        }

        .exercise-target {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .exercise-item.active .exercise-target,
        .exercise-item.completed .exercise-target {
            color: rgba(255, 255, 255, 0.8);
        }

        .exercise-last-reps {
            font-size: 13px;
            margin-top: 5px;
            color: var(--text-secondary);
        }

        .exercise-item.active .exercise-last-reps,
        .exercise-item.completed .exercise-last-reps {
            color: rgba(255, 255, 255, 0.9);
        }

        .rep-input-container {
            margin-top: 10px;
            display: none;
        }

        .exercise-item.active .rep-input-container {
            display: block;
        }

        .rep-input {
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: 2px solid white;
            font-size: 16px;
            background: white;
            color: black;
        }

        .timer-display {
            text-align: center;
            font-size: 64px;
            font-weight: 700;
            color: var(--accent);
            margin: 30px 0;
            font-family: 'Courier New', monospace;
            text-shadow: 0 0 30px var(--accent);
            opacity: 0.6;
            letter-spacing: 4px;
        }

        .timer-label {
            text-align: center;
            font-size: 12px;
            color: #888888;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        .round-indicator {
            text-align: center;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 24px;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 3px;
            padding: 12px;
            background: var(--accent);
            opacity: 0.12;
            border-left: 3px solid var(--accent);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            margin-top: 15px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 2px;
            background: var(--bg-secondary);
            font-size: 14px;
            padding: 8px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .calendar-day:hover {
            background: rgba(16, 185, 129, 0.1);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .calendar-day.completed {
            background: var(--accent);
            opacity: 0.25;
            border: 1px solid var(--accent);
            color: white;
            box-shadow: 0 0 15px var(--accent);
            opacity: 0.4;
        }

        .calendar-day.incomplete {
            background: rgba(245, 158, 11, 0.15);
            border: 1px dashed #f59e0b;
            color: #f59e0b;
        }

        .calendar-day.rest {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid #f59e0b;
            color: white;
        }

        .calendar-day-number {
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }

        .calendar-day-rounds {
            font-size: 10px;
            margin-top: 3px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 11px;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .calendar-header-day {
            text-align: center;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px;
            background: var(--bg-secondary);
            border-radius: 2px;
            margin-bottom: 12px;
            border-left: 3px solid var(--accent);
            opacity: 0.6;
            transition: all 0.3s;
        }

        .stat-item:hover {
            background: var(--accent);
            opacity: 0.08;
            border-left-color: var(--accent);
        }

        .stat-label {
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.5s;
        }

        .stat-value {
            color: var(--accent);
            font-weight: 700;
            font-size: 20px;
            font-family: 'Courier New', monospace;
            margin-left: 20px;
        }

        .nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--nav-bg);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(16, 185, 129, 0.2);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -4px 30px rgba(0, 0, 0, 0.8);
            transition: background 0.5s;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px 5px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-secondary);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s;
        }

        .nav-item.active::before {
            width: 80%;
        }

        .nav-item.active {
            color: var(--accent);
        }

        .nav-item:hover {
            color: var(--accent);
        }

        .nav-icon {
            font-size: 11px;
            margin-bottom: 0px;
            filter: none;
            transition: none;
            font-weight: 700;
        }

        .nav-item.active .nav-icon,
        .nav-item:hover .nav-icon {
            filter: none;
        }

        .page {
            display: none;
            padding-bottom: 80px;
        }

        .page.active {
            display: block;
        }

        .settings-group {
            margin-bottom: 25px;
        }

        .settings-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }

        .settings-input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
            transition: background 0.5s, color 0.5s, border 0.5s;
        }

        .settings-input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--border);
            transition: .4s;
            border-radius: 26px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--accent);
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .notification-dot {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            background: var(--danger);
            border-radius: 50%;
        }

        .suggestion-banner {
            background: var(--warning);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .suggestion-text {
            flex: 1;
            font-size: 14px;
        }

        .suggestion-close {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }

        .month-selector {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--accent);
            opacity: 0.3;
        }

        .month-selector button {
            background: var(--accent);
            opacity: 0.12;
            border: 1px solid var(--accent);
            opacity: 0.4;
            color: var(--accent);
            padding: 10px 20px;
            border-radius: 2px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }

        .month-selector button:hover {
            background: var(--accent);
            opacity: 0.25;
            box-shadow: 0 0 15px var(--accent);
            opacity: 0.3;
        }

        .settings-input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
            transition: background 0.5s, color 0.5s, border 0.5s;
        }

        .month-selector h3 {
            font-size: 16px;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: color 0.5s;
        }

        .core-finisher-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--border);
        }

        .core-exercise-item {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
        }

        .exercise-pr {
            display: inline-block;
            background: #f59e0b;
            color: #000000;
            padding: 3px 10px;
            border-radius: 2px;
            font-size: 10px;
            margin-left: 8px;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .rest-day-btn {
            background: var(--warning);
            color: white;
        }

        textarea.settings-input {
            min-height: 100px;
            font-family: inherit;
            resize: vertical;
        }

        /* Timer Page Styles */
        .timer-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            padding: 20px;
        }

        .timer-mode-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
        }

        .timer-mode-btn {
            padding: 12px 30px;
            border: 2px solid var(--accent);
            background: transparent;
            color: var(--accent);
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 2px;
        }

        .timer-mode-btn.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 0 30px var(--accent);
        }

        .timer-display-large {
            font-size: 120px;
            font-family: 'Courier New', monospace;
            font-weight: 700;
            color: var(--accent);
            text-shadow: 0 0 60px var(--accent);
            margin: 40px 0;
            letter-spacing: 8px;
            line-height: 1;
        }

        .timer-controls {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        .timer-btn {
            padding: 18px 40px;
            border: 2px solid var(--accent);
            background: var(--accent);
            color: white;
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 2px;
        }

        .timer-btn:hover {
            box-shadow: 0 0 30px var(--accent);
            transform: translateY(-2px);
        }

        .timer-btn.secondary {
            background: transparent;
            color: var(--accent);
        }

        .timer-btn.secondary:hover {
            background: rgba(var(--accent), 0.1);
        }

        .timer-presets {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 30px;
            max-width: 600px;
        }

        .preset-btn {
            padding: 15px;
            border: 1px solid var(--accent);
            background: transparent;
            color: var(--accent);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 2px;
        }

        .preset-btn:hover {
            background: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            color: white;
        }

        .timer-custom-input {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 20px;
        }

        .timer-input {
            width: 80px;
            padding: 12px;
            border: 1px solid var(--accent);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
            text-align: center;
            border-radius: 2px;
            font-family: 'Courier New', monospace;
        }

        .timer-input:focus {
            outline: none;
            box-shadow: 0 0 15px var(--accent);
        }

        .complete-workout-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-hover) 100%);
            color: white;
            border: none;
            border-radius: 2px;
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s;
            box-shadow: 0 4px 30px var(--accent);
        }

        .complete-workout-btn:hover {
            box-shadow: 0 6px 40px var(--accent);
            transform: translateY(-2px);
        }

        /* Chart Styles */
        .chart-container {
            background: var(--card-bg);
            border-radius: 2px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 3px solid var(--accent);
            transition: all 0.5s;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent);
            margin-bottom: 20px;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        .heatmap-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-top: 15px;
        }

        .heatmap-day {
            aspect-ratio: 1;
            border-radius: 2px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            transition: all 0.3s;
            position: relative;
            cursor: pointer;
        }

        .heatmap-day:hover {
            transform: scale(1.1);
            z-index: 10;
        }

        .heatmap-day.level-0 {
            background: var(--bg-secondary);
        }

        .heatmap-day.level-1 {
            background: var(--accent);
            opacity: 0.3;
        }

        .heatmap-day.level-2 {
            background: var(--accent);
            opacity: 0.6;
        }

        .heatmap-day.level-3 {
            background: var(--accent);
            opacity: 0.9;
        }

        .heatmap-day.level-4 {
            background: var(--accent);
            opacity: 1;
        }

        .heatmap-legend {
            display: flex;
            gap: 5px;
            align-items: center;
            margin-top: 15px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .legend-item {
            width: 15px;
            height: 15px;
            border-radius: 2px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .success-message {
            background: var(--accent);
            border: 2px solid var(--accent);
            color: white;
            padding: 20px;
            border-radius: 2px;
            margin-top: 20px;
            text-align: center;
            font-weight: 600;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .skip-timer-btn {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }

        .user-info-box {
            background: var(--accent);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .user-email {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                padding-bottom: 120px;
            }

            .header h1 {
                font-size: 24px;
            }

            .nav {
                gap: 5px;
                padding: 10px 5px;
            }

            .nav-item {
                font-size: 10px;
                padding: 8px 5px;
            }

            .timer-display-large {
                font-size: 60px;
                letter-spacing: 4px;
            }

            .timer-mode-btn {
                padding: 10px 20px;
                font-size: 12px;
            }

            .timer-controls {
                flex-direction: column;
                gap: 10px;
            }

            .timer-btn {
                width: 100%;
                padding: 15px;
            }

            .timer-presets {
                grid-template-columns: repeat(2, 1fr);
            }

            .auth-container {
                padding: 30px 20px;
                width: 95%;
            }

            .auth-logo {
                font-size: 12px;
            }

            .auth-title {
                font-size: 24px;
            }

            .card {
                padding: 15px;
            }

            .exercise-item {
                padding: 12px;
            }

            .exercise-name {
                font-size: 13px;
            }

            .exercise-target {
                font-size: 11px;
            }

            .rep-input {
                font-size: 36px;
                padding: 15px;
            }

            .btn {
                font-size: 13px;
                padding: 12px 20px;
            }

            .complete-workout-btn {
                font-size: 16px;
                padding: 16px;
            }

            .calendar-grid {
                gap: 4px;
            }

            .calendar-day {
                padding: 4px;
                min-height: 50px;
            }

            .calendar-day-number {
                font-size: 12px;
            }

            .calendar-day-rounds {
                font-size: 9px;
            }

            .stat-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .stat-label {
                font-size: 11px;
            }

            .stat-value {
                font-size: 18px;
            }

            .streak-display {
                font-size: 12px;
                padding: 8px 12px;
            }

            .timer-display {
                font-size: 32px;
            }

            .round-indicator {
                font-size: 13px;
                padding: 10px 15px;
            }

            /* Hide or shrink gym background elements on mobile */
            .gym-rack-left,
            .gym-rack-right {
                width: 8px;
            }

            .gym-bench {
                display: none;
            }

            .gym-dumbbells {
                bottom: 80px;
            }

            .gym-mirror {
                opacity: 0.3;
            }
        }

        /* Extra small phones */
        @media (max-width: 375px) {
            .nav-item {
                font-size: 9px;
                padding: 6px 3px;
            }

            .rep-input {
                font-size: 32px;
            }

            .timer-display-large {
                font-size: 48px;
            }

            .complete-workout-btn {
                font-size: 14px;
                padding: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- PERSISTENT GYM BACKGROUND - Always visible -->
    <div class="gym-photo-bg"></div>
    <div class="gym-racks">
        <div class="rack-left"></div>
        <div class="rack-right"></div>
    </div>
    <div class="gym-mirror"></div>
    <div class="gym-bench">
        <div class="bench-bar">
            <div class="bench-plate"></div>
            <div class="bench-plate"></div>
        </div>
        <div class="bench-base"></div>
    </div>
    <div class="dumbbell-row">
        <div class="dumbbell"></div>
        <div class="dumbbell"></div>
        <div class="dumbbell"></div>
        <div class="dumbbell"></div>
    </div>
    <div class="gym-background"></div>
    <div class="tech-lines">
        <div class="tech-line"></div>
        <div class="tech-line"></div>
        <div class="tech-line"></div>
        <div class="tech-line"></div>
    </div>
    <div class="gym-equipment">
        <div class="gym-visual"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
        <div class="equipment-item"></div>
    </div>
    <div class="gym-shadows">
        <div class="shadow-person"></div>
        <div class="shadow-person"></div>
        <div class="shadow-person"></div>
    </div>
    <div class="gym-floor"></div>
    <div class="pulse-ring"></div>
    <div class="pulse-ring"></div>
    <div class="pulse-ring"></div>
    <div class="pulse-ring"></div>

    <div id="auth-screen">
        <!-- Auth screens will be rendered here -->
    </div>

    <div id="app-screen" class="app-container">
        <!-- Main app will be rendered here -->
    </div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase SDK v9 (modular) -->
    <script type="module">
        // No Firebase - using localStorage only!
            getDoc,
            updateDoc,
            collection,
            query,
            where,
            getDocs
        };

        // Signal that Firebase is ready
        window.firebaseReady = true;
        window.dispatchEvent(new Event('firebaseReady'));
    </script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Force dark mode for auth screen
        document.body.setAttribute('data-theme', 'dark');

        const EXERCISES = [
            { id: 1, name: 'Push-ups', target: '8-15 reps', note: '(knees if needed; wide grip for chest)', type: 'reps' },
            { id: 2, name: 'Bodyweight Squats (or Jump Squats if advanced)', target: '15-20 reps', note: '', type: 'reps' },
            { id: 3, name: 'Inverted Rows or Superman Holds', target: '10-15 reps/holds', note: '(back balance)', type: 'reps' },
            { id: 4, name: 'Lunges', target: '10-12 reps per leg', note: '(alternating legs or reverse)', type: 'reps' },
            { id: 5, name: 'Plank (forearm)', target: '30-60 seconds', note: 'Hold', type: 'time' },
            { id: 6, name: 'Bicycle Crunches (or Lying Leg Raises)', target: '15-20 reps per side', note: '', type: 'reps' },
            { id: 7, name: 'Burpees (or Mountain Climbers if burpees are too hard)', target: '10-15 burpees OR 30-45 seconds mountain climbers', note: '', type: 'reps' }
        ];

        const CORE_FINISHER = [
            { id: 'cf1', name: 'Plank', target: '45 seconds', type: 'time' },
            { id: 'cf2', name: 'Bicycle Crunches', target: '20 per side', type: 'reps' },
            { id: 'cf3', name: 'Russian Twists', target: '20 per side', type: 'reps' }
        ];

        // Authentication and User Management
        // Firebase AuthManager - Real authentication with email verification
        class AuthManager {
            static async createAccount(email, password, name) {
                try {
                    const { createUserWithEmailAndPassword, sendEmailVerification } = window.firebaseAuthFunctions;
                    const { doc, setDoc } = window.firebaseDBFunctions;
                    
                    // Create user account
                    const userCredential = await createUserWithEmailAndPassword(
                        window.firebaseAuth, 
                        email, 
                        password
                    );
                    
                    // Send verification email
                    await sendEmailVerification(userCredential.user);
                    
                    // Create user document in Firestore
                    await setDoc(doc(window.firebaseDB, 'users', userCredential.user.uid), {
                        email,
                        name,
                        createdAt: new Date().toISOString(),
                        userData: {
                            setupComplete: true,
                            defaultRounds: 3,
                            restTimerDuration: 15,
                            darkMode: true,
                            gymTheme: 'default',
                            workoutHistory: [],
                            notes: ''
                        }
                    });
                    
                    return { 
                        success: true, 
                        message: 'Account created! Please check your email to verify your account.' 
                    };
                } catch (error) {
                    console.error('Signup error:', error);
                    console.error('Error code:', error.code);
                    console.error('Error message:', error.message);
                    console.error('Full error object:', JSON.stringify(error, null, 2));
                    
                    // Show detailed error to user
                    let errorMessage = 'Failed to create account: ' + error.message;
                    if (error.code) {
                        errorMessage += ' (Code: ' + error.code + ')';
                    }
                    
                    if (error.code === 'auth/email-already-in-use') {
                        errorMessage = 'Account already exists with this email';
                    } else if (error.code === 'auth/weak-password') {
                        errorMessage = 'Password should be at least 6 characters';
                    } else if (error.code === 'auth/invalid-email') {
                        errorMessage = 'Invalid email address';
                    } else if (error.code === 'permission-denied') {
                        errorMessage = 'Database permission denied. Please contact support.';
                    }
                    return { success: false, error: errorMessage };
                }
            }

            static async login(email, password) {
                try {
                    const { signInWithEmailAndPassword } = window.firebaseAuthFunctions;
                    const userCredential = await signInWithEmailAndPassword(
                        window.firebaseAuth,
                        email,
                        password
                    );
                    
                    // Check if email is verified
                    if (!userCredential.user.emailVerified) {
                        await this.logout();
                        return { 
                            success: false, 
                            error: 'Please verify your email before logging in. Check your inbox.' 
                        };
                    }
                    
                    // Get user data from Firestore
                    const { doc, getDoc } = window.firebaseDBFunctions;
                    const userDoc = await getDoc(doc(window.firebaseDB, 'users', userCredential.user.uid));
                    
                    if (!userDoc.exists()) {
                        return { success: false, error: 'User data not found' };
                    }
                    
                    const userData = userDoc.data();
                    return { 
                        success: true, 
                        user: {
                            ...userData,
                            uid: userCredential.user.uid
                        }
                    };
                } catch (error) {
                    console.error('Login error:', error);
                    let errorMessage = 'Failed to login';
                    if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
                        errorMessage = 'Invalid email or password';
                    } else if (error.code === 'auth/invalid-credential') {
                        errorMessage = 'Invalid email or password';
                    } else if (error.code === 'auth/too-many-requests') {
                        errorMessage = 'Too many failed attempts. Try again later.';
                    }
                    return { success: false, error: errorMessage };
                }
            }

            static async getCurrentUser() {
                return new Promise((resolve) => {
                    const { onAuthStateChanged } = window.firebaseAuthFunctions;
                    onAuthStateChanged(window.firebaseAuth, async (firebaseUser) => {
                        if (firebaseUser && firebaseUser.emailVerified) {
                            const { doc, getDoc } = window.firebaseDBFunctions;
                            const userDoc = await getDoc(doc(window.firebaseDB, 'users', firebaseUser.uid));
                            if (userDoc.exists()) {
                                resolve({
                                    ...userDoc.data(),
                                    uid: firebaseUser.uid
                                });
                            } else {
                                resolve(null);
                            }
                        } else {
                            resolve(null);
                        }
                    });
                });
            }

            static async logout() {
                const { signOut } = window.firebaseAuthFunctions;
                await signOut(window.firebaseAuth);
            }

            static async updateUserData(uid, userData) {
                try {
                    const { doc, updateDoc } = window.firebaseDBFunctions;
                    await updateDoc(doc(window.firebaseDB, 'users', uid), {
                        userData: userData
                    });
                } catch (error) {
                    console.error('Error updating user data:', error);
                }
            }

            static async resetPassword(email) {
                try {
                    const { sendPasswordResetEmail } = window.firebaseAuthFunctions;
                    await sendPasswordResetEmail(window.firebaseAuth, email);
                    return { 
                        success: true, 
                        message: 'Password reset email sent! Check your inbox.' 
                    };
                } catch (error) {
                    console.error('Password reset error:', error);
                    let errorMessage = 'Failed to send reset email';
                    if (error.code === 'auth/user-not-found') {
                        errorMessage = 'No account found with this email';
                    }
                    return { success: false, error: errorMessage };
                }
            }
        }

        function App() {
            // Load user data from localStorage
            const loadUserData = () => {
                try {
                    const stored = localStorage.getItem('workoutTrackerData');
                    if (stored) {
                        return JSON.parse(stored);
                    }
                } catch (error) {
                    console.error('Error loading data:', error);
                }
                // Default data
                return {
                    name: 'Ray E',
                    email: 'user@example.com',
                    workoutHistory: [],
                    darkMode: true,
                    gymTheme: 'default',
                    defaultRounds: 3,
                    restTimerDuration: 15,
                    notes: ''
                };
            };

            const [currentUser, setCurrentUser] = useState(loadUserData());

            // Save to localStorage whenever user data changes
            useEffect(() => {
                try {
                    localStorage.setItem('workoutTrackerData', JSON.stringify(currentUser));
                } catch (error) {
                    console.error('Error saving data:', error);
                }
            }, [currentUser]);

            const handleLogout = () => {
                // Just clear localStorage
                if (confirm('Clear all workout data? This cannot be undone.')) {
                    localStorage.removeItem('workoutTrackerData');
                    setCurrentUser(loadUserData());
                }
            };

            // Render main app directly (no login screen)
            return <MainApp user={{ name: currentUser.name, userData: currentUser }} onLogout={handleLogout} />;
        }

        function AuthScreen({ onLogin }) {
            const [isLogin, setIsLogin] = useState(true);
            const [isForgotPassword, setIsForgotPassword] = useState(false);
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [name, setName] = useState('');
            const [error, setError] = useState('');
            const [success, setSuccess] = useState('');
            const [loading, setLoading] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setSuccess('');
                setLoading(true);

                try {
                    if (isForgotPassword) {
                        // Password reset
                        const result = await AuthManager.resetPassword(email);
                        if (result.success) {
                            setSuccess(result.message);
                            setIsForgotPassword(false);
                        } else {
                            setError(result.error);
                        }
                    } else if (isLogin) {
                        // Login
                        const result = await AuthManager.login(email, password);
                        if (result.success) {
                            onLogin(result.user);
                        } else {
                            setError(result.error);
                        }
                    } else {
                        // Signup
                        if (!name.trim()) {
                            setError('Please enter your name');
                            setLoading(false);
                            return;
                        }
                        if (!email.trim() || !password.trim()) {
                            setError('Please fill in all fields');
                            setLoading(false);
                            return;
                        }
                        if (password.length < 6) {
                            setError('Password must be at least 6 characters');
                            setLoading(false);
                            return;
                        }

                        const result = await AuthManager.createAccount(email, password, name);
                        if (result.success) {
                            setSuccess(result.message);
                            setIsLogin(true);
                            setPassword('');
                        } else {
                            setError(result.error);
                        }
                    }
                } catch (err) {
                    setError('An error occurred. Please try again.');
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="auth-container">
                    <div className="auth-logo">WORKOUT TRACKER</div>
                    <h1 className="auth-title">
                        {isForgotPassword ? 'Reset Password' : isLogin ? 'Welcome Back' : 'Create Account'}
                    </h1>
                    <p className="auth-subtitle">
                        {isForgotPassword ? 'Enter your email to receive reset link' : 
                         isLogin ? 'Log in to continue your fitness journey' : 'Start your transformation today'}
                    </p>

                    {error && <div className="error-message">{error}</div>}
                    {success && <div className="success-message" style={{background: 'var(--accent)', opacity: 0.2, border: '2px solid var(--accent)', color: 'white', padding: '15px', marginBottom: '20px', borderRadius: '2px'}}>{success}</div>}

                    <form onSubmit={handleSubmit}>
                        {!isLogin && !isForgotPassword && (
                            <div className="form-group">
                                <label className="form-label">Full Name</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    placeholder="Enter your name"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                    disabled={loading}
                                />
                            </div>
                        )}

                        <div className="form-group">
                            <label className="form-label">Email</label>
                            <input
                                type="email"
                                className="form-input"
                                placeholder="Enter your email"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                                disabled={loading}
                            />
                        </div>

                        {!isForgotPassword && (
                            <div className="form-group">
                                <label className="form-label">Password</label>
                                <input
                                    type="password"
                                    className="form-input"
                                    placeholder="Enter your password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    disabled={loading}
                                />
                            </div>
                        )}

                        {isLogin && !isForgotPassword && (
                            <div style={{textAlign: 'right', marginBottom: '15px'}}>
                                <button
                                    type="button"
                                    onClick={() => setIsForgotPassword(true)}
                                    style={{
                                        background: 'none',
                                        border: 'none',
                                        color: 'var(--accent)',
                                        fontSize: '13px',
                                        cursor: 'pointer',
                                        textDecoration: 'underline'
                                    }}
                                >
                                    Forgot Password?
                                </button>
                            </div>
                        )}

                        <button type="submit" className="btn btn-primary" disabled={loading}>
                            {loading ? 'Please wait...' : 
                             isForgotPassword ? 'Send Reset Email' : 
                             isLogin ? 'Log In' : 'Create Account'}
                        </button>
                    </form>

                    <div className="divider">
                        {isForgotPassword ? 'Remember your password?' :
                         isLogin ? "Don't have an account?" : 'Already have an account?'}
                    </div>

                    <button 
                        className="btn btn-secondary"
                        onClick={() => {
                            if (isForgotPassword) {
                                setIsForgotPassword(false);
                                setIsLogin(true);
                            } else {
                                setIsLogin(!isLogin);
                            }
                            setError('');
                            setSuccess('');
                        }}
                    >
                        {isForgotPassword ? 'Back to Login' :
                         isLogin ? 'Create New Account' : 'Log In'}
                    </button>
                </div>
            );
        }

        function MainApp({ user, onLogout }) {
            const [currentPage, setCurrentPage] = useState('home');
            const [showMoreMenu, setShowMoreMenu] = useState(false);
            const [darkMode, setDarkMode] = useState(user.userData.darkMode || false);
            const [gymTheme, setGymTheme] = useState(user.userData.gymTheme || 'default');
            const [defaultRounds, setDefaultRounds] = useState(user.userData.defaultRounds || 3);
            const [restTimerDuration, setRestTimerDuration] = useState(user.userData.restTimerDuration || 15);
            
            // Workout state
            const [workoutActive, setWorkoutActive] = useState(false);
            const [currentRound, setCurrentRound] = useState(1);
            const [totalRounds, setTotalRounds] = useState(3);
            const [currentExerciseIndex, setCurrentExerciseIndex] = useState(0);
            const [roundData, setRoundData] = useState([]);
            const [timerActive, setTimerActive] = useState(false);
            const [timerSeconds, setTimerSeconds] = useState(0);
            const [timerType, setTimerType] = useState('');
            const [workoutStartTime, setWorkoutStartTime] = useState(null);
            const [coreFinisherActive, setCoreFinisherActive] = useState(false);
            const [coreFinisherData, setCoreFinisherData] = useState([]);
            const [showSuccessMessage, setShowSuccessMessage] = useState(false);
            const [coreCurrentRound, setCoreCurrentRound] = useState(1);
            const [coreCurrentExercise, setCoreCurrentExercise] = useState(0);
            
            // History and stats
            const [workoutHistory, setWorkoutHistory] = useState(user.userData.workoutHistory || []);
            const [calendarMonth, setCalendarMonth] = useState(new Date());
            const [suggestions, setSuggestions] = useState([]);
            const [notes, setNotes] = useState(user.userData.notes || '');

            // Save data whenever it changes
            useEffect(() => {
                try {
                    const userData = {
                        name: user.name,
                        email: user.userData.email || 'user@example.com',
                        setupComplete: true,
                        defaultRounds,
                        restTimerDuration,
                        darkMode,
                        gymTheme,
                        workoutHistory,
                        notes
                    };
                    localStorage.setItem('workoutTrackerData', JSON.stringify(userData));
                } catch (error) {
                    console.error('Error saving data:', error);
                }
            }, [defaultRounds, restTimerDuration, darkMode, gymTheme, workoutHistory, notes]);

            // Apply theme
            useEffect(() => {
                document.body.setAttribute('data-theme', darkMode ? 'dark' : 'light');
                document.body.setAttribute('data-gym-theme', gymTheme);
            }, [darkMode, gymTheme]);

            // Timer logic
            useEffect(() => {
                let interval;
                if (timerActive && timerSeconds > 0) {
                    interval = setInterval(() => {
                        setTimerSeconds(prev => {
                            if (prev <= 1) {
                                setTimerActive(false);
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [timerActive, timerSeconds]);

            // Check for suggestions
            useEffect(() => {
                if (workoutHistory.length >= 8) {
                    const recentWorkouts = workoutHistory.slice(-8);
                    const allThreeRounds = recentWorkouts.every(w => w.totalRounds === 3);
                    
                    if (allThreeRounds && defaultRounds === 3) {
                        const suggestionExists = suggestions.find(s => s.type === 'upgrade-rounds');
                        if (!suggestionExists) {
                            setSuggestions(prev => [...prev, {
                                type: 'upgrade-rounds',
                                message: 'Great consistency! Consider upgrading to 4 rounds for more challenge.'
                            }]);
                        }
                    }
                }

                // Check for exercise progression
                if (workoutHistory.length >= 5) {
                    const recent = workoutHistory.slice(-5);
                    EXERCISES.forEach(exercise => {
                        const exerciseData = recent.map(w => {
                            const rounds = w.rounds || [];
                            return rounds.map(r => r[exercise.id]).filter(Boolean);
                        }).flat();

                        if (exerciseData.length >= 10) {
                            const avgReps = exerciseData.reduce((a, b) => a + b, 0) / exerciseData.length;
                            const targetMax = parseInt(exercise.target.split('-')[1]);
                            
                            if (avgReps >= targetMax - 2) {
                                const suggestionExists = suggestions.find(s => 
                                    s.type === 'exercise-progression' && s.exerciseId === exercise.id
                                );
                                if (!suggestionExists) {
                                    setSuggestions(prev => [...prev, {
                                        type: 'exercise-progression',
                                        exerciseId: exercise.id,
                                        message: `${exercise.name}: You're crushing it! Consider a harder variation.`
                                    }]);
                                }
                            }
                        }
                    });
                }
            }, [workoutHistory, defaultRounds, suggestions]);

            // Wake lock reference
            const [wakeLock, setWakeLock] = useState(null);

            const startWorkout = async () => {
                setWorkoutActive(true);
                setCurrentRound(1);
                setCurrentExerciseIndex(0);
                setRoundData([]);
                setTotalRounds(defaultRounds);
                setWorkoutStartTime(new Date());
                setCoreFinisherActive(false);
                setCoreFinisherData([]);

                // Request screen wake lock
                try {
                    if ('wakeLock' in navigator) {
                        const lock = await navigator.wakeLock.request('screen');
                        setWakeLock(lock);
                        console.log('Screen wake lock activated');
                    }
                } catch (err) {
                    console.log('Wake lock not supported or failed:', err);
                }
            };

            const resumeWorkout = () => {
                // Resume from saved state if exists
                setCurrentPage('workout');
            };

            const logReps = (exerciseId, reps) => {
                const newRoundData = [...roundData];
                if (!newRoundData[currentRound - 1]) {
                    newRoundData[currentRound - 1] = {};
                }
                newRoundData[currentRound - 1][exerciseId] = parseInt(reps);
                setRoundData(newRoundData);

                if (currentExerciseIndex < EXERCISES.length - 1) {
                    setCurrentExerciseIndex(prev => prev + 1);
                    setTimerType('between');
                    setTimerSeconds(restTimerDuration);
                    setTimerActive(true);
                } else {
                    if (currentRound < totalRounds) {
                        setTimerType('rest');
                        setTimerSeconds(180);
                        setTimerActive(true);
                        setCurrentRound(prev => prev + 1);
                        setCurrentExerciseIndex(0);
                    } else {
                        finishMainWorkout();
                    }
                }
            };

            const finishMainWorkout = () => {
                const shouldAskCore = window.confirm('Main workout complete! Do you want to do the Core Finisher (3 rounds)?');
                if (shouldAskCore) {
                    setCoreFinisherActive(true);
                    setCoreCurrentRound(1);
                    setCoreCurrentExercise(0);
                    setCoreFinisherData([]);
                } else {
                    completeWorkout(false);
                }
            };

            const logCoreReps = (exerciseId, reps) => {
                const newData = [...coreFinisherData];
                if (!newData[coreCurrentRound - 1]) {
                    newData[coreCurrentRound - 1] = {};
                }
                newData[coreCurrentRound - 1][exerciseId] = parseInt(reps);
                setCoreFinisherData(newData);

                if (coreCurrentExercise < CORE_FINISHER.length - 1) {
                    setCoreCurrentExercise(prev => prev + 1);
                    setTimerType('between');
                    setTimerSeconds(restTimerDuration);
                    setTimerActive(true);
                } else {
                    if (coreCurrentRound < 3) {
                        setCoreCurrentRound(prev => prev + 1);
                        setCoreCurrentExercise(0);
                        setTimerType('between');
                        setTimerSeconds(30);
                        setTimerActive(true);
                    } else {
                        completeWorkout(true);
                    }
                }
            };

            const completeWorkout = async (includedCore) => {
                const endTime = new Date();
                const duration = Math.round((endTime - workoutStartTime) / 1000 / 60);

                const workout = {
                    date: endTime.toISOString(),
                    totalRounds: totalRounds,
                    completedRounds: totalRounds,
                    rounds: roundData,
                    coreFinisher: includedCore,
                    coreRounds: includedCore ? coreFinisherData : [],
                    duration: duration,
                    isComplete: true,
                    exercisesDone: EXERCISES.length * totalRounds,
                    totalExercisesExpected: EXERCISES.length * totalRounds
                };

                setWorkoutHistory(prev => [...prev, workout]);
                setWorkoutActive(false);
                setCoreFinisherActive(false);
                setShowSuccessMessage(true);
                
                // Release wake lock
                if (wakeLock) {
                    try {
                        await wakeLock.release();
                        setWakeLock(null);
                        console.log('Screen wake lock released');
                    } catch (err) {
                        console.log('Wake lock release failed:', err);
                    }
                }
                
                // Hide success message after 3 seconds and go home
                setTimeout(() => {
                    setShowSuccessMessage(false);
                    setCurrentPage('home');
                }, 3000);
            };

            const manualCompleteWorkout = async () => {
                if (!workoutActive) return;
                
                // Count how many FULL rounds were actually completed (all exercises done)
                const fullRoundsCompleted = roundData.filter(round => {
                    return Object.keys(round).length === EXERCISES.length;
                }).length;
                
                console.log('Manual Complete Debug:');
                console.log('roundData:', roundData);
                console.log('fullRoundsCompleted:', fullRoundsCompleted);
                console.log('currentRound:', currentRound);
                console.log('totalRounds:', totalRounds);
                
                const isComplete = currentRound === totalRounds && currentExerciseIndex >= EXERCISES.length;
                
                // Save current progress
                const endTime = new Date();
                const duration = Math.round((endTime - workoutStartTime) / 1000 / 60);

                const workout = {
                    date: endTime.toISOString(),
                    totalRounds: totalRounds,
                    completedRounds: fullRoundsCompleted,
                    rounds: roundData,
                    coreFinisher: coreFinisherActive,
                    coreRounds: coreFinisherActive ? coreFinisherData : [],
                    duration: duration,
                    isComplete: isComplete,
                    exercisesDone: roundData.reduce((total, round) => total + Object.keys(round).length, 0),
                    totalExercisesExpected: EXERCISES.length * totalRounds
                };

                console.log('Saving workout:', workout);

                setWorkoutHistory(prev => [...prev, workout]);
                setWorkoutActive(false);
                setCoreFinisherActive(false);
                setShowSuccessMessage(true);
                
                // Release wake lock
                if (wakeLock) {
                    try {
                        await wakeLock.release();
                        setWakeLock(null);
                        console.log('Screen wake lock released');
                    } catch (err) {
                        console.log('Wake lock release failed:', err);
                    }
                }
                
                // Hide success message after 3 seconds and go home
                setTimeout(() => {
                    setShowSuccessMessage(false);
                    setCurrentPage('home');
                }, 3000);
            };

            const logRestDay = () => {
                const restDay = {
                    date: new Date().toISOString(),
                    isRestDay: true
                };
                setWorkoutHistory(prev => [...prev, restDay]);
            };

            const skipTimer = () => {
                setTimerActive(false);
                setTimerSeconds(0);
            };

            const getStreak = () => {
                if (workoutHistory.length === 0) return 0;
                
                let streak = 0;
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                const sortedHistory = [...workoutHistory].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );

                for (let i = 0; i < sortedHistory.length; i++) {
                    const workoutDate = new Date(sortedHistory[i].date);
                    workoutDate.setHours(0, 0, 0, 0);
                    
                    const daysDiff = Math.floor((today - workoutDate) / (1000 * 60 * 60 * 24));
                    
                    if (daysDiff === streak) {
                        streak++;
                    } else if (daysDiff > streak) {
                        break;
                    }
                }
                
                return streak;
            };

            const getLastWorkout = (exerciseId) => {
                const workouts = workoutHistory.filter(w => !w.isRestDay);
                if (workouts.length === 0) return null;
                
                const last = workouts[workouts.length - 1];
                const repsArray = last.rounds.map(r => r[exerciseId]).filter(Boolean);
                
                if (repsArray.length === 0) return null;
                return Math.round(repsArray.reduce((a, b) => a + b, 0) / repsArray.length);
            };

            const getPersonalRecord = (exerciseId) => {
                const workouts = workoutHistory.filter(w => !w.isRestDay);
                let maxReps = 0;
                
                workouts.forEach(workout => {
                    workout.rounds.forEach(round => {
                        if (round[exerciseId] && round[exerciseId] > maxReps) {
                            maxReps = round[exerciseId];
                        }
                    });
                });
                
                return maxReps || null;
            };

            return (
                <div className="app-container active">
                    {currentPage === 'home' && (
                        <HomePage 
                            userName={user.name}
                            streak={getStreak()}
                            workoutActive={workoutActive}
                            startWorkout={startWorkout}
                            logRestDay={logRestDay}
                            workoutHistory={workoutHistory}
                            suggestions={suggestions}
                            setSuggestions={setSuggestions}
                            setCurrentPage={setCurrentPage}
                        />
                    )}

                    {currentPage === 'workout' && (
                        <WorkoutPage 
                            workoutActive={workoutActive}
                            coreFinisherActive={coreFinisherActive}
                            currentRound={currentRound}
                            totalRounds={totalRounds}
                            currentExerciseIndex={currentExerciseIndex}
                            logReps={logReps}
                            getLastWorkout={getLastWorkout}
                            getPersonalRecord={getPersonalRecord}
                            timerActive={timerActive}
                            timerSeconds={timerSeconds}
                            timerType={timerType}
                            skipTimer={skipTimer}
                            coreCurrentRound={coreCurrentRound}
                            coreCurrentExercise={coreCurrentExercise}
                            logCoreReps={logCoreReps}
                            startWorkout={startWorkout}
                            manualCompleteWorkout={manualCompleteWorkout}
                            showSuccessMessage={showSuccessMessage}
                        />
                    )}

                    {currentPage === 'timer' && <TimerPage />}

                    {currentPage === 'calendar' && (
                        <CalendarPage 
                            workoutHistory={workoutHistory}
                            calendarMonth={calendarMonth}
                            setCalendarMonth={setCalendarMonth}
                        />
                    )}

                    {currentPage === 'info' && (
                        <InfoPage />
                    )}

                    {currentPage === 'stats' && (
                        <StatsPage 
                            workoutHistory={workoutHistory}
                            getStreak={getStreak}
                        />
                    )}

                    {currentPage === 'settings' && (
                        <SettingsPage 
                            user={user}
                            defaultRounds={defaultRounds}
                            setDefaultRounds={setDefaultRounds}
                            restTimerDuration={restTimerDuration}
                            setRestTimerDuration={setRestTimerDuration}
                            darkMode={darkMode}
                            setDarkMode={setDarkMode}
                            gymTheme={gymTheme}
                            setGymTheme={setGymTheme}
                            notes={notes}
                            setNotes={setNotes}
                            suggestions={suggestions}
                            onLogout={onLogout}
                        />
                    )}

                    {currentPage === 'manual-entry' && (
                        <ManualEntryPage 
                            workoutHistory={workoutHistory}
                            setWorkoutHistory={setWorkoutHistory}
                            setCurrentPage={setCurrentPage}
                        />
                    )}

                    {/* More Menu Overlay */}
                    {showMoreMenu && (
                        <div style={{
                            position: 'fixed',
                            bottom: '70px',
                            right: '10px',
                            background: 'var(--bg-primary)',
                            border: '2px solid var(--accent)',
                            borderRadius: '12px',
                            padding: '10px',
                            zIndex: 1001,
                            boxShadow: '0 -4px 20px rgba(0,0,0,0.5)',
                            minWidth: '160px'
                        }}>
                            <div 
                                style={{
                                    padding: '12px 16px',
                                    cursor: 'pointer',
                                    borderBottom: '1px solid var(--bg-secondary)',
                                    color: currentPage === 'calendar' ? 'var(--accent)' : 'var(--text-primary)',
                                    fontWeight: currentPage === 'calendar' ? 'bold' : 'normal'
                                }}
                                onClick={() => {
                                    setCurrentPage('calendar');
                                    setShowMoreMenu(false);
                                }}
                            >
                                 CALENDAR
                            </div>
                            <div 
                                style={{
                                    padding: '12px 16px',
                                    cursor: 'pointer',
                                    borderBottom: '1px solid var(--bg-secondary)',
                                    color: currentPage === 'stats' ? 'var(--accent)' : 'var(--text-primary)',
                                    fontWeight: currentPage === 'stats' ? 'bold' : 'normal'
                                }}
                                onClick={() => {
                                    setCurrentPage('stats');
                                    setShowMoreMenu(false);
                                }}
                            >
                                 STATS
                            </div>
                            <div 
                                style={{
                                    padding: '12px 16px',
                                    cursor: 'pointer',
                                    borderBottom: '1px solid var(--bg-secondary)',
                                    color: currentPage === 'info' ? 'var(--accent)' : 'var(--text-primary)',
                                    fontWeight: currentPage === 'info' ? 'bold' : 'normal'
                                }}
                                onClick={() => {
                                    setCurrentPage('info');
                                    setShowMoreMenu(false);
                                }}
                            >
                                 INFO
                            </div>
                            <div 
                                style={{
                                    padding: '12px 16px',
                                    cursor: 'pointer',
                                    color: currentPage === 'settings' ? 'var(--accent)' : 'var(--text-primary)',
                                    fontWeight: currentPage === 'settings' ? 'bold' : 'normal',
                                    position: 'relative'
                                }}
                                onClick={() => {
                                    setCurrentPage('settings');
                                    setShowMoreMenu(false);
                                }}
                            >
                                 SETTINGS
                                {suggestions.length > 0 && <div className="notification-dot"></div>}
                            </div>
                        </div>
                    )}

                    {/* Click outside to close menu */}
                    {showMoreMenu && (
                        <div 
                            style={{
                                position: 'fixed',
                                top: 0,
                                left: 0,
                                right: 0,
                                bottom: 0,
                                zIndex: 1000
                            }}
                            onClick={() => setShowMoreMenu(false)}
                        />
                    )}

                    <nav className="nav">
                        <div className={`nav-item ${currentPage === 'home' ? 'active' : ''}`} 
                             onClick={() => setCurrentPage('home')}>
                            <div className="nav-icon">HOME</div>
                        </div>
                        <div className={`nav-item ${currentPage === 'workout' ? 'active' : ''}`} 
                             onClick={() => setCurrentPage('workout')}>
                            <div className="nav-icon">TRAIN</div>
                        </div>
                        <div className={`nav-item ${currentPage === 'timer' ? 'active' : ''}`} 
                             onClick={() => setCurrentPage('timer')}>
                            <div className="nav-icon">TIMER</div>
                        </div>
                        <div className={`nav-item ${['calendar', 'stats', 'info', 'settings'].includes(currentPage) ? 'active' : ''}`} 
                             onClick={() => setShowMoreMenu(!showMoreMenu)}>
                            <div className="nav-icon" style={{position: 'relative'}}>
                                MORE
                                {suggestions.length > 0 && <div className="notification-dot"></div>}
                            </div>
                        </div>
                    </nav>
                </div>
            );
        }

        // All the page components (HomePage, WorkoutPage, etc.) remain the same as before
        // I'll include them for completeness

        function HomePage({ userName, streak, workoutActive, startWorkout, logRestDay, workoutHistory, suggestions, setSuggestions, setCurrentPage }) {
            // Get the most recent workout from today (last one, not first)
            const todayWorkouts = workoutHistory.filter(w => {
                const workoutDate = new Date(w.date);
                const today = new Date();
                return workoutDate.toDateString() === today.toDateString();
            });
            const todayWorkout = todayWorkouts.length > 0 ? todayWorkouts[todayWorkouts.length - 1] : null;

            return (
                <div className="container">
                    <div className="header">
                        <h1>Welcome, {userName}</h1>
                        <div className="streak-display">
                            <span className="streak-flame">STREAK</span>
                            <span>{streak} DAYS</span>
                        </div>
                    </div>

                    {suggestions.map((suggestion, idx) => (
                        <div key={idx} className="suggestion-banner">
                            <div className="suggestion-text">{suggestion.message}</div>
                            <button className="suggestion-close" onClick={() => {
                                setSuggestions(prev => prev.filter((_, i) => i !== idx));
                            }}></button>
                        </div>
                    ))}

                    <div className="card">
                        <h3 style={{marginBottom: '15px'}}>Workout Instructions</h3>
                        <div style={{fontSize: '14px', lineHeight: '1.6', color: 'var(--text-secondary)'}}>
                            <p style={{marginBottom: '10px'}}>
                                <strong>Circuit Format:</strong> Perform exercises 17 back-to-back with minimal rest (10-30 seconds). 
                                After exercise 7, rest 2-3 minutes, then repeat the circuit.
                            </p>
                            <p style={{marginBottom: '10px'}}>
                                <strong>Total Rounds:</strong> 3 rounds (beginners) or 4 rounds (once stronger, usually after 2-4 weeks)
                            </p>
                            <p style={{marginBottom: '10px'}}>
                                <strong>Workout Time:</strong> 30-45 minutes total
                            </p>
                            <p style={{marginBottom: '10px'}}>
                                <strong>Frequency:</strong> 3-4 times per week (same workout every day)
                            </p>
                            <p>
                                <strong>Core Finisher:</strong> Optional 2-3 days per week - 3 rounds of Plank, Bicycle Crunches, Russian Twists
                            </p>
                        </div>
                    </div>

                    <div className="card">
                        <h2>Ready to Train?</h2>
                        {todayWorkout ? (
                            <>
                                <h2>WORKOUT COMPLETE</h2>
                                <p style={{marginTop: '10px', color: 'var(--text-secondary)'}}>
                                    {todayWorkout.isRestDay ? 'Rest day logged' : 
                                     todayWorkout.isComplete === false ? 
                                     `Incomplete - ${todayWorkout.completedRounds || 0} of ${todayWorkout.totalRounds} rounds` :
                                     `Completed ${todayWorkout.totalRounds} rounds` + 
                                     (todayWorkout.coreFinisher ? ' + Core Finisher' : '')}
                                </p>
                            </>
                        ) : workoutActive ? (
                            <>
                                <h2>Workout in Progress...</h2>
                                <p style={{marginTop: '10px', color: 'var(--text-secondary)'}}>
                                    Go to the Workout tab to continue
                                </p>
                                <button 
                                    className="btn btn-primary" 
                                    onClick={() => {
                                        setCurrentPage('workout');
                                    }}
                                    style={{marginTop: '15px'}}
                                >
                                    Resume Workout
                                </button>
                            </>
                        ) : (
                            <>
                                <button className="btn btn-primary" onClick={startWorkout}>
                                    Start Workout
                                </button>
                                <button className="btn rest-day-btn" onClick={logRestDay}>
                                    Log Rest Day
                                </button>
                            </>
                        )}
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px'}}>Manual Entry</h3>
                        <button 
                            className="btn" 
                            onClick={() => setCurrentPage('manual-entry')}
                            style={{width: '100%', background: 'var(--bg-secondary)', color: 'var(--text-primary)'}}
                        >
                            + Add Past Workout
                        </button>
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px'}}>Quick Stats</h3>
                        <div className="stat-item">
                            <span className="stat-label">Total Workouts</span>
                            <span className="stat-value">{workoutHistory.filter(w => !w.isRestDay && w.isComplete !== false).length}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">This Week</span>
                            <span className="stat-value">
                                {workoutHistory.filter(w => {
                                    const date = new Date(w.date);
                                    const weekAgo = new Date();
                                    weekAgo.setDate(weekAgo.getDate() - 7);
                                    return date >= weekAgo && !w.isRestDay && w.isComplete !== false;
                                }).length}
                            </span>
                        </div>
                    </div>
                </div>
            );
        }

        function WorkoutPage({ 
            workoutActive, coreFinisherActive, currentRound, totalRounds, currentExerciseIndex, 
            logReps, getLastWorkout, getPersonalRecord, timerActive, timerSeconds, timerType,
            skipTimer, coreCurrentRound, coreCurrentExercise, logCoreReps, startWorkout,
            manualCompleteWorkout, showSuccessMessage
        }) {
            const [repInputs, setRepInputs] = useState({});
            const inputRef = useRef(null);

            useEffect(() => {
                if (inputRef.current && workoutActive && !coreFinisherActive) {
                    inputRef.current.focus();
                }
            }, [currentExerciseIndex, workoutActive, coreFinisherActive]);

            if (!workoutActive) {
                return (
                    <div className="container">
                        <div className="header">
                            <h1>Workout</h1>
                        </div>
                        <div className="card">
                            <h2>No Active Workout</h2>
                            <p style={{margin: '15px 0', color: 'var(--text-secondary)'}}>
                                Start a workout from the Home page
                            </p>
                            <button className="btn btn-primary" onClick={startWorkout}>
                                Start Workout
                            </button>
                        </div>
                    </div>
                );
            }

            if (timerActive) {
                const minutes = Math.floor(timerSeconds / 60);
                const seconds = timerSeconds % 60;
                
                return (
                    <div className="container">
                        <div className="header">
                            <h1>Rest Timer</h1>
                        </div>
                        <div className="card">
                            <div className="timer-label">
                                {timerType === 'rest' ? '3-Minute Rest' : 'Between Exercises'}
                            </div>
                            <div className="timer-display">
                                {minutes}:{seconds.toString().padStart(2, '0')}
                            </div>
                            <button className="skip-timer-btn btn" onClick={skipTimer}>
                                Skip Timer
                            </button>
                        </div>
                    </div>
                );
            }

            if (coreFinisherActive) {
                const exercise = CORE_FINISHER[coreCurrentExercise];
                
                return (
                    <div className="container">
                        <div className="header">
                            <h1>Core Finisher</h1>
                            <div className="round-indicator">
                                Round {coreCurrentRound} / 3
                            </div>
                        </div>

                        <div className="card">
                            {CORE_FINISHER.map((ex, idx) => {
                                const isActive = idx === coreCurrentExercise;
                                const isCompleted = idx < coreCurrentExercise;

                                return (
                                    <div key={ex.id} 
                                         className={`exercise-item ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}`}>
                                        <div className="exercise-header">
                                            <span className="exercise-name">{ex.name}</span>
                                            <span className="exercise-target">{ex.target}</span>
                                        </div>

                                        {isActive && (
                                            <div className="rep-input-container">
                                                <input 
                                                    type="number"
                                                    className="rep-input"
                                                    placeholder="Enter reps/seconds"
                                                    value={repInputs[ex.id] || ''}
                                                    onChange={(e) => setRepInputs({...repInputs, [ex.id]: e.target.value})}
                                                    onKeyPress={(e) => {
                                                        if (e.key === 'Enter' && repInputs[ex.id]) {
                                                            logCoreReps(ex.id, repInputs[ex.id]);
                                                            setRepInputs({...repInputs, [ex.id]: ''});
                                                        }
                                                    }}
                                                    ref={inputRef}
                                                />
                                                <button 
                                                    className="btn btn-primary"
                                                    style={{marginTop: '10px'}}
                                                    onClick={() => {
                                                        if (repInputs[ex.id]) {
                                                            logCoreReps(ex.id, repInputs[ex.id]);
                                                            setRepInputs({...repInputs, [ex.id]: ''});
                                                        }
                                                    }}
                                                >
                                                    Next
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <div className="header">
                        <h1>Main Workout</h1>
                        <div className="round-indicator">
                            Round {currentRound} / {totalRounds}
                        </div>
                    </div>

                    <div className="card">
                        {EXERCISES.map((exercise, idx) => {
                            const isActive = idx === currentExerciseIndex;
                            const isCompleted = idx < currentExerciseIndex;
                            const lastReps = getLastWorkout(exercise.id);
                            const pr = getPersonalRecord(exercise.id);
                            const currentInput = parseInt(repInputs[exercise.id]);
                            const isPR = pr && currentInput > pr;

                            return (
                                <div key={exercise.id} 
                                     className={`exercise-item ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}`}>
                                    <div className="exercise-header">
                                        <span className="exercise-name">
                                            {exercise.name}
                                            {isPR && <span className="exercise-pr">NEW PR</span>}
                                        </span>
                                        <span className="exercise-target">{exercise.target}</span>
                                    </div>
                                    
                                    {exercise.note && !isActive && (
                                        <div style={{fontSize: '12px', color: 'var(--text-secondary)', marginTop: '3px'}}>
                                            {exercise.note}
                                        </div>
                                    )}
                                    
                                    {lastReps && (
                                        <div className="exercise-last-reps">
                                            Last avg: {lastReps} {exercise.type === 'time' ? 'sec' : 'reps'}
                                            {pr && `  PR: ${pr}`}
                                        </div>
                                    )}

                                    {isActive && (
                                        <div className="rep-input-container">
                                            <input 
                                                type="number"
                                                className="rep-input"
                                                placeholder={exercise.type === 'time' ? 'Enter seconds' : 'Enter reps'}
                                                value={repInputs[exercise.id] || ''}
                                                onChange={(e) => setRepInputs({...repInputs, [exercise.id]: e.target.value})}
                                                onKeyPress={(e) => {
                                                    if (e.key === 'Enter' && repInputs[exercise.id]) {
                                                        logReps(exercise.id, repInputs[exercise.id]);
                                                        setRepInputs({...repInputs, [exercise.id]: ''});
                                                    }
                                                }}
                                                ref={inputRef}
                                            />
                                            <button 
                                                className="btn btn-primary"
                                                style={{marginTop: '10px'}}
                                                onClick={() => {
                                                    if (repInputs[exercise.id]) {
                                                        logReps(exercise.id, repInputs[exercise.id]);
                                                        setRepInputs({...repInputs, [exercise.id]: ''});
                                                    }
                                                }}
                                            >
                                                {idx === EXERCISES.length - 1 && currentRound === totalRounds ? 'Finish' : 'Next'}
                                            </button>
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>

                    {showSuccessMessage && (
                        <div className="success-message">
                             Workout Complete! Saved to calendar. Great job!
                        </div>
                    )}

                    <button className="complete-workout-btn" onClick={manualCompleteWorkout}>
                        Complete Workout
                    </button>
                </div>
            );
        }

        function TimerPage() {
            const [mode, setMode] = useState('stopwatch'); // 'stopwatch' or 'countdown'
            const [time, setTime] = useState(0); // in seconds
            const [isRunning, setIsRunning] = useState(false);
            const [countdownStart, setCountdownStart] = useState(60);
            const [customMin, setCustomMin] = useState('');
            const [customSec, setCustomSec] = useState('');

            useEffect(() => {
                let interval;
                if (isRunning) {
                    interval = setInterval(() => {
                        if (mode === 'stopwatch') {
                            setTime(t => t + 1);
                        } else {
                            setTime(t => {
                                if (t <= 1) {
                                    // Timer done - play sound and vibrate
                                    playTimerSound();
                                    vibrateDevice();
                                    setIsRunning(false);
                                    return 0;
                                }
                                return t - 1;
                            });
                        }
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [isRunning, mode]);

            const playTimerSound = () => {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIGWm98OScTgwOUKvo87RgGgU7k9r0yHMpBSh+zPLaizsKEly57O2lUxQKRp/h8r9uIQUtg9Dy2Ic0CBpoxPDmnkoMDU+q5vOxYBoEOpPa9Mh0KAUof8zz2os6ChJduu3tpVMUCkef4fK/bB8FLYPa8NuINAYab8Pz5pwPDA5Ore7ztF8aBDmT2vTIdCcFJ4DN8tuKOQoSXrnz7KVSDApHnt/ywm0gBS2D2fDbiDUHGnDD9OWeEAwOT6zz9LNdGQQ5k+D0yXUoBSh/y/LajDkKEVm19/Gp');
                audio.play().catch(() => {}); // Ignore errors if autoplay blocked
            };

            const vibrateDevice = () => {
                if ('vibrate' in navigator) {
                    navigator.vibrate([200, 100, 200, 100, 200]);
                }
            };

            const startTimer = () => setIsRunning(true);
            const pauseTimer = () => setIsRunning(false);
            const resetTimer = () => {
                setIsRunning(false);
                setTime(mode === 'countdown' ? countdownStart : 0);
            };

            const setPresetTime = (seconds) => {
                setCountdownStart(seconds);
                setTime(seconds);
                setIsRunning(false);
            };

            const setCustomTime = () => {
                const mins = parseInt(customMin) || 0;
                const secs = parseInt(customSec) || 0;
                const total = (mins * 60) + secs;
                if (total > 0) {
                    setCountdownStart(total);
                    setTime(total);
                    setCustomMin('');
                    setCustomSec('');
                }
            };

            const formatTime = (seconds) => {
                const hrs = Math.floor(seconds / 3600);
                const mins = Math.floor((seconds % 3600) / 60);
                const secs = seconds % 60;
                
                if (hrs > 0) {
                    return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                }
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            return (
                <div className="container">
                    <div className="timer-page">
                        <div className="timer-mode-selector">
                            <button 
                                className={`timer-mode-btn ${mode === 'stopwatch' ? 'active' : ''}`}
                                onClick={() => {
                                    setMode('stopwatch');
                                    setTime(0);
                                    setIsRunning(false);
                                }}
                            >
                                Stopwatch
                            </button>
                            <button 
                                className={`timer-mode-btn ${mode === 'countdown' ? 'active' : ''}`}
                                onClick={() => {
                                    setMode('countdown');
                                    setTime(countdownStart);
                                    setIsRunning(false);
                                }}
                            >
                                Countdown
                            </button>
                        </div>

                        <div className="timer-display-large">
                            {formatTime(time)}
                        </div>

                        <div className="timer-controls">
                            {!isRunning ? (
                                <button className="timer-btn" onClick={startTimer}>
                                    Start
                                </button>
                            ) : (
                                <button className="timer-btn" onClick={pauseTimer}>
                                    Pause
                                </button>
                            )}
                            <button className="timer-btn secondary" onClick={resetTimer}>
                                Reset
                            </button>
                        </div>

                        {mode === 'countdown' && !isRunning && (
                            <>
                                <div className="timer-presets">
                                    <button className="preset-btn" onClick={() => setPresetTime(30)}>30s</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(60)}>1min</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(180)}>3min</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(300)}>5min</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(600)}>10min</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(900)}>15min</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(1200)}>20min</button>
                                    <button className="preset-btn" onClick={() => setPresetTime(1800)}>30min</button>
                                </div>

                                <div className="timer-custom-input">
                                    <input 
                                        type="number" 
                                        className="timer-input" 
                                        placeholder="Min"
                                        value={customMin}
                                        onChange={(e) => setCustomMin(e.target.value)}
                                        min="0"
                                    />
                                    <span style={{color: 'var(--text-primary)', fontSize: '20px'}}>:</span>
                                    <input 
                                        type="number" 
                                        className="timer-input" 
                                        placeholder="Sec"
                                        value={customSec}
                                        onChange={(e) => setCustomSec(e.target.value)}
                                        min="0"
                                        max="59"
                                    />
                                    <button className="timer-btn secondary" onClick={setCustomTime}>
                                        Set
                                    </button>
                                </div>
                            </>
                        )}
                    </div>
                </div>
            );
        }

        function CalendarPage({ workoutHistory, calendarMonth, setCalendarMonth }) {
            const getDaysInMonth = (date) => {
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startingDayOfWeek = firstDay.getDay();

                const days = [];
                
                for (let i = 0; i < startingDayOfWeek; i++) {
                    days.push(null);
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const date = new Date(year, month, day);
                    const workoutsOnDay = workoutHistory.filter(w => {
                        const workoutDate = new Date(w.date);
                        return workoutDate.toDateString() === date.toDateString();
                    });

                    days.push({
                        day,
                        date,
                        workouts: workoutsOnDay
                    });
                }

                return days;
            };

            const days = getDaysInMonth(calendarMonth);

            const previousMonth = () => {
                setCalendarMonth(new Date(calendarMonth.getFullYear(), calendarMonth.getMonth() - 1, 1));
            };

            const nextMonth = () => {
                setCalendarMonth(new Date(calendarMonth.getFullYear(), calendarMonth.getMonth() + 1, 1));
            };

            const monthName = calendarMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

            return (
                <div className="container">
                    <div className="header">
                        <h1>Calendar</h1>
                    </div>

                    <div className="card">
                        <div className="month-selector">
                            <button onClick={previousMonth}></button>
                            <h3>{monthName}</h3>
                            <button onClick={nextMonth}></button>
                        </div>

                        <div className="calendar-header">
                            <div className="calendar-header-day">Sun</div>
                            <div className="calendar-header-day">Mon</div>
                            <div className="calendar-header-day">Tue</div>
                            <div className="calendar-header-day">Wed</div>
                            <div className="calendar-header-day">Thu</div>
                            <div className="calendar-header-day">Fri</div>
                            <div className="calendar-header-day">Sat</div>
                        </div>

                        <div className="calendar-grid">
                            {days.map((dayData, idx) => {
                                if (!dayData) {
                                    return <div key={`empty-${idx}`} className="calendar-day"></div>;
                                }

                                const { day, workouts } = dayData;
                                const hasWorkouts = workouts && workouts.length > 0;
                                const completeWorkouts = workouts ? workouts.filter(w => !w.isRestDay && w.isComplete !== false) : [];
                                const incompleteWorkouts = workouts ? workouts.filter(w => !w.isRestDay && w.isComplete === false) : [];
                                const restDays = workouts ? workouts.filter(w => w.isRestDay) : [];
                                
                                const isCompleted = completeWorkouts.length > 0;
                                const isIncomplete = incompleteWorkouts.length > 0 && completeWorkouts.length === 0;
                                const isRest = restDays.length > 0 && completeWorkouts.length === 0 && incompleteWorkouts.length === 0;

                                return (
                                    <div key={idx} className={`calendar-day ${isCompleted ? 'completed' : ''} ${isIncomplete ? 'incomplete' : ''} ${isRest ? 'rest' : ''}`}>
                                        <div className="calendar-day-number">{day}</div>
                                        {isCompleted && (
                                            <div className="calendar-day-rounds">
                                                {completeWorkouts.length} workout{completeWorkouts.length !== 1 ? 's' : ''}
                                            </div>
                                        )}
                                        {isIncomplete && (
                                            <div className="calendar-day-rounds">
                                                {incompleteWorkouts.length} partial
                                            </div>
                                        )}
                                        {isRest && (
                                            <div className="calendar-day-rounds">Rest</div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        }

        function InfoPage() {
            return (
                <div className="container">
                    <div className="header">
                        <h1>WORKOUT SCIENCE & BENEFITS</h1>
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px', color: 'var(--accent)'}}>Why These "Simple" Exercises Work</h3>
                        <div style={{fontSize: '14px', lineHeight: '1.7', color: 'var(--text-primary)'}}>
                            <p style={{marginBottom: '12px'}}>
                                These bodyweight exercises are <strong>highly effective</strong> for getting lean (losing fat from chest, abs, and love handles), 
                                building muscle (visible definition and strength), and improving overall fitness (better posture and metabolism).
                            </p>
                            <p style={{marginBottom: '12px'}}>
                                <strong>Science-backed benefits:</strong>
                            </p>
                            <ul style={{marginLeft: '20px', marginBottom: '12px'}}>
                                <li>Compound movements recruit multiple large muscle groups</li>
                                <li>High calorie burn: 300-500 calories per circuit session</li>
                                <li>Muscle hypertrophy (growth) with progressive overload</li>
                                <li>Improved insulin sensitivity for better fat loss</li>
                                <li>Elevated EPOC (afterburn) - burns extra calories for hours after</li>
                            </ul>
                            <p style={{marginBottom: '12px', fontStyle: 'italic', background: 'var(--bg-secondary)', padding: '10px', borderRadius: '6px'}}>
                                Studies from the Journal of Strength and Conditioning Research show bodyweight training produces similar muscle gains 
                                and fat loss as weights for beginners/intermediates, especially in a calorie deficit.
                            </p>
                            <p>
                                With higher body fat, this setup supports <strong>body recomposition</strong> - lose fat AND gain muscle at the fastest safe rate.
                            </p>
                        </div>
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px', color: 'var(--accent)'}}>How Each Exercise Helps Your Goals</h3>
                        
                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>PUSH-UPS (8-15 REPS)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Pecs (chest), triceps, shoulders, core stabilizers
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> Directly builds and defines your chest (reducing "man boob" appearance as fat drops), 
                                while the plank-like position strengthens abs. High reps burn calories; progression (diamond variation) adds muscle. 
                                Research shows push-ups activate 70-80% of max chest muscle - comparable to bench press.
                            </p>
                        </div>

                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>BODYWEIGHT SQUATS (15-20 REPS)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Quads, glutes, hamstrings, core
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> Largest lower-body muscles = highest calorie/metabolism boost (legs burn more energy than upper body). 
                                Builds a stronger, more athletic base; improves hormone response (testosterone/GH) for overall muscle gain and fat loss.
                            </p>
                        </div>

                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>SUPERMAN HOLDS (10-15 REPS/HOLDS)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Lower back, upper back, glutes, rear shoulders
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> Balances chest work to prevent rounded shoulders/posture issues; strengthens posterior chain 
                                for better metabolism and injury prevention. A strong back makes you look leaner and more muscular from all angles.
                            </p>
                        </div>

                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>LUNGES (10-12 PER LEG)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Quads, glutes, hamstrings, core stability
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> Unilateral (single-leg) work fixes imbalances, boosts calorie burn, and tightens core/love handles 
                                through stabilization. Great for lower-body muscle that raises resting metabolism.
                            </p>
                        </div>

                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>PLANK (30-60 SECONDS)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Entire core (abs, obliques, transverse abdominis), shoulders
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> Builds deep core strength for a tighter midsection; isometric hold burns calories without spine stress. 
                                Side planks hit love handles directly. Core training improves posture, making you look leaner instantly.
                            </p>
                        </div>

                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>BICYCLE CRUNCHES (15-20 PER SIDE)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Upper/lower abs, obliques (sides/love handles)
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> One of the highest-activating ab exercises per EMG studies - better than standard crunches for 
                                rectus abdominis and obliques. Rotation targets your problem side areas for better definition as fat decreases.
                            </p>
                        </div>

                        <div style={{marginBottom: '20px', padding: '15px', background: 'var(--bg-secondary)', borderRadius: '8px'}}>
                            <h4 style={{marginBottom: '8px', fontSize: '16px'}}>BURPEES (10-15 REPS)</h4>
                            <p style={{fontSize: '13px', marginBottom: '8px', color: 'var(--text-secondary)'}}>
                                <strong>Primary targets:</strong> Full body (chest, legs, core, cardio system)
                            </p>
                            <p style={{fontSize: '14px', lineHeight: '1.6'}}>
                                <strong>How it helps:</strong> Ultimate fat-torcher - combines strength + HIIT for massive calorie burn (10-15 per minute) and afterburn. 
                                Builds endurance and muscle while accelerating fat loss everywhere, including stubborn areas.
                            </p>
                        </div>
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px', color: 'var(--accent)'}}>The Complete Plan</h3>
                        <div style={{fontSize: '14px', lineHeight: '1.7'}}>
                            <p style={{marginBottom: '12px', fontWeight: '600'}}>
                                Same workout every training day - no need to change exercises
                            </p>
                            <div style={{background: 'var(--bg-secondary)', padding: '15px', borderRadius: '8px', marginBottom: '15px'}}>
                                <p style={{fontWeight: '600', marginBottom: '8px'}}>Circuit Format:</p>
                                <ul style={{marginLeft: '20px'}}>
                                    <li>Perform exercises 17 in order, one set each</li>
                                    <li>Minimal rest between exercises (10-30 seconds)</li>
                                    <li>After exercise 7, rest 2-3 minutes</li>
                                    <li>Repeat entire circuit for 3 rounds (beginners) or 4 rounds (advanced)</li>
                                    <li>Total workout time: 30-45 minutes</li>
                                    <li>Frequency: 3-4 times per week</li>
                                </ul>
                            </div>

                            <div style={{background: 'var(--warning)', color: 'white', padding: '15px', borderRadius: '8px', marginBottom: '15px'}}>
                                <p style={{fontWeight: '600', marginBottom: '8px'}}>Optional Core Finisher (2-3 days/week):</p>
                                <p style={{marginBottom: '8px'}}>After your main circuits, add 3 rounds of:</p>
                                <ul style={{marginLeft: '20px'}}>
                                    <li>Plank: 45 seconds</li>
                                    <li>Bicycle Crunches: 20 per side</li>
                                    <li>Russian Twists: 20 per side</li>
                                </ul>
                                <p style={{fontSize: '12px', fontStyle: 'italic', marginTop: '8px'}}>
                                    Minimal rest between exercises
                                </p>
                            </div>

                            <div style={{background: 'var(--accent)', color: 'white', padding: '15px', borderRadius: '8px'}}>
                                <p style={{fontWeight: '600', marginBottom: '8px'}}>Progression Strategy:</p>
                                <ul style={{marginLeft: '20px'}}>
                                    <li>Track your reps each session</li>
                                    <li>When an exercise feels easier (hitting top of rep range), make it harder</li>
                                    <li>Examples: knee push-ups  full push-ups, add pauses, slower reps</li>
                                    <li>Move from 3 to 4 rounds after 2-4 weeks of consistency</li>
                                </ul>
                                <p style={{fontSize: '13px', fontStyle: 'italic', marginTop: '10px', borderTop: '1px solid rgba(255,255,255,0.3)', paddingTop: '10px'}}>
                                    <strong>Remember:</strong> Combine this with a calorie deficit and high protein. You'll see fat drop from chest/abs/sides 
                                    while building muscle as fast as safely possible. Consistency is everything!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function StatsPage({ workoutHistory, getStreak }) {
            const totalWorkouts = workoutHistory.filter(w => !w.isRestDay).length;
            const completeWorkouts = workoutHistory.filter(w => !w.isRestDay && w.isComplete !== false).length;
            const incompleteWorkouts = workoutHistory.filter(w => !w.isRestDay && w.isComplete === false).length;
            const totalRestDays = workoutHistory.filter(w => w.isRestDay).length;
            const streak = getStreak();
            
            const avgRounds = totalWorkouts > 0 
                ? (workoutHistory.filter(w => !w.isRestDay).reduce((sum, w) => sum + w.totalRounds, 0) / totalWorkouts).toFixed(1)
                : 0;

            const coreFinisherCount = workoutHistory.filter(w => w.coreFinisher).length;

            const avgDuration = totalWorkouts > 0
                ? Math.round(workoutHistory.filter(w => !w.isRestDay && w.duration).reduce((sum, w) => sum + w.duration, 0) / totalWorkouts)
                : 0;

            let bestStreak = 0;
            let currentStreak = 0;
            const sortedHistory = [...workoutHistory].sort((a, b) => new Date(a.date) - new Date(b.date));

            sortedHistory.forEach((workout, idx) => {
                if (idx === 0) {
                    currentStreak = 1;
                } else {
                    const prevDate = new Date(sortedHistory[idx - 1].date);
                    const currDate = new Date(workout.date);
                    prevDate.setHours(0, 0, 0, 0);
                    currDate.setHours(0, 0, 0, 0);
                    
                    const daysDiff = Math.floor((currDate - prevDate) / (1000 * 60 * 60 * 24));
                    
                    if (daysDiff === 1) {
                        currentStreak++;
                    } else {
                        bestStreak = Math.max(bestStreak, currentStreak);
                        currentStreak = 1;
                    }
                }
            });
            bestStreak = Math.max(bestStreak, currentStreak);

            const exercisePRs = EXERCISES.map(exercise => {
                let maxReps = 0;
                workoutHistory.forEach(workout => {
                    if (workout.rounds) {
                        workout.rounds.forEach(round => {
                            if (round[exercise.id] && round[exercise.id] > maxReps) {
                                maxReps = round[exercise.id];
                            }
                        });
                    }
                });
                return { exercise: exercise.name, pr: maxReps };
            }).filter(pr => pr.pr > 0);

            return (
                <div className="container">
                    <div className="header">
                        <h1>Stats</h1>
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px'}}>Overall Progress</h3>
                        <div className="stat-item">
                            <span className="stat-label">Complete Workouts</span>
                            <span className="stat-value">{completeWorkouts}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Incomplete Workouts</span>
                            <span className="stat-value" style={{color: '#f59e0b'}}>{incompleteWorkouts}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Total Workouts</span>
                            <span className="stat-value">{totalWorkouts}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Rest Days Logged</span>
                            <span className="stat-value">{totalRestDays}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Current Streak</span>
                            <span className="stat-value">{streak} DAYS</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Best Streak</span>
                            <span className="stat-value">{bestStreak} DAYS</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Avg Rounds</span>
                            <span className="stat-value">{avgRounds}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Core Finishers</span>
                            <span className="stat-value">{coreFinisherCount}</span>
                        </div>
                        <div className="stat-item">
                            <span className="stat-label">Avg Duration</span>
                            <span className="stat-value">{avgDuration} min</span>
                        </div>
                    </div>

                    {exercisePRs.length > 0 && (
                        <div className="card">
                            <h3 style={{marginBottom: '15px'}}>Personal Records</h3>
                            {exercisePRs.map((pr, idx) => (
                                <div key={idx} className="stat-item">
                                    <span className="stat-label">{pr.exercise}</span>
                                    <span className="stat-value">{pr.pr}</span>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        function SettingsPage({ 
            user, defaultRounds, setDefaultRounds, 
            restTimerDuration, setRestTimerDuration, darkMode, setDarkMode,
            gymTheme, setGymTheme, notes, setNotes, suggestions, onLogout
        }) {
            return (
                <div className="container">
                    <div className="header">
                        <h1>Settings</h1>
                    </div>

                    <div className="user-info-box">
                        <div style={{fontSize: '18px', fontWeight: '600', marginBottom: '5px'}}>
                            {user.name}
                        </div>
                        <div className="user-email">{user.email}</div>
                    </div>

                    <div className="card">
                        <div className="settings-group">
                            <label className="settings-label">Default Rounds</label>
                            <select 
                                className="settings-input"
                                value={defaultRounds}
                                onChange={(e) => setDefaultRounds(parseInt(e.target.value))}
                            >
                                <option value={3}>3 Rounds</option>
                                <option value={4}>4 Rounds</option>
                            </select>
                        </div>

                        <div className="settings-group">
                            <label className="settings-label">Rest Timer Between Exercises (seconds)</label>
                            <select 
                                className="settings-input"
                                value={restTimerDuration}
                                onChange={(e) => setRestTimerDuration(parseInt(e.target.value))}
                            >
                                <option value={10}>10 seconds</option>
                                <option value={15}>15 seconds</option>
                                <option value={20}>20 seconds</option>
                                <option value={30}>30 seconds</option>
                            </select>
                        </div>

                        <div className="toggle-switch">
                            <span className="settings-label">Dark Mode</span>
                            <label className="switch">
                                <input 
                                    type="checkbox"
                                    checked={darkMode}
                                    onChange={(e) => setDarkMode(e.target.checked)}
                                />
                                <span className="slider"></span>
                            </label>
                        </div>

                        <div className="settings-group">
                            <label className="settings-label">Gym Theme</label>
                            <select 
                                className="settings-input"
                                value={gymTheme}
                                onChange={(e) => setGymTheme(e.target.value)}
                            >
                                <option value="default">Professional Clean (Blue)</option>
                                <option value="powerlifting">Powerlifting (Red/Orange)</option>
                                <option value="functional">Functional Training (Multi-Color)</option>
                                <option value="boxing">Boxing/MMA (Yellow/Gold)</option>
                                <option value="crossfit">CrossFit (Cyan/Gray)</option>
                            </select>
                        </div>
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px'}}>Exercise Notes</h3>
                        <p style={{fontSize: '14px', color: 'var(--text-secondary)', marginBottom: '10px'}}>
                            Track your exercise variations and upgrades here
                        </p>
                        <textarea 
                            className="settings-input"
                            value={notes}
                            onChange={(e) => setNotes(e.target.value)}
                            placeholder="e.g., 'Switched to full push-ups on 12/25', 'Started jump squats on 1/1'"
                        />
                    </div>

                    {suggestions.length > 0 && (
                        <div className="card">
                            <h3 style={{marginBottom: '15px'}}>Suggestions ({suggestions.length})</h3>
                            {suggestions.map((s, idx) => (
                                <div key={idx} style={{
                                    padding: '12px',
                                    background: 'var(--bg-secondary)',
                                    borderRadius: '6px',
                                    marginBottom: '8px',
                                    fontSize: '14px'
                                }}>
                                    {s.message}
                                </div>
                            ))}
                        </div>
                    )}

                    <button className="logout-btn" onClick={onLogout}>
                        Log Out
                    </button>
                </div>
            );
        }

        function ManualEntryPage({ workoutHistory, setWorkoutHistory, setCurrentPage }) {
            const [editingWorkout, setEditingWorkout] = useState(null);
            const [showAddForm, setShowAddForm] = useState(false);
            const [formDate, setFormDate] = useState(new Date().toISOString().split('T')[0]);
            const [formRounds, setFormRounds] = useState(3);
            const [formDuration, setFormDuration] = useState(30);
            const [formCoreFinisher, setFormCoreFinisher] = useState(false);
            const [formIsRestDay, setFormIsRestDay] = useState(false);

            const addManualWorkout = () => {
                // Fix timezone issue: parse date as local time at noon
                const localDate = new Date(formDate + 'T12:00:00');
                
                const workout = {
                    date: localDate.toISOString(),
                    totalRounds: formIsRestDay ? 0 : parseInt(formRounds),
                    completedRounds: formIsRestDay ? 0 : parseInt(formRounds),
                    rounds: [],
                    coreFinisher: formIsRestDay ? false : formCoreFinisher,
                    coreRounds: [],
                    duration: formIsRestDay ? 0 : parseInt(formDuration),
                    isComplete: !formIsRestDay,
                    isRestDay: formIsRestDay,
                    exercisesDone: formIsRestDay ? 0 : EXERCISES.length * parseInt(formRounds),
                    totalExercisesExpected: formIsRestDay ? 0 : EXERCISES.length * parseInt(formRounds)
                };

                setWorkoutHistory(prev => [...prev, workout]);
                setShowAddForm(false);
                setFormDate(new Date().toISOString().split('T')[0]);
                setFormRounds(3);
                setFormDuration(30);
                setFormCoreFinisher(false);
                setFormIsRestDay(false);
            };

            const deleteWorkout = (index) => {
                if (confirm('Delete this workout?')) {
                    setWorkoutHistory(prev => prev.filter((_, i) => i !== index));
                }
            };

            const sortedHistory = [...workoutHistory].sort((a, b) => new Date(b.date) - new Date(a.date));

            return (
                <div className="container">
                    <div className="header">
                        <button 
                            onClick={() => setCurrentPage('home')}
                            style={{
                                background: 'none',
                                border: 'none',
                                color: 'var(--accent)',
                                fontSize: '24px',
                                cursor: 'pointer',
                                padding: '0',
                                marginRight: '15px'
                            }}
                        >
                            
                        </button>
                        <h1>Workout History</h1>
                    </div>

                    <div className="card">
                        <button 
                            className="btn btn-primary"
                            onClick={() => setShowAddForm(!showAddForm)}
                            style={{width: '100%'}}
                        >
                            {showAddForm ? 'Cancel' : '+ Add Workout'}
                        </button>

                        {showAddForm && (
                            <div style={{marginTop: '20px'}}>
                                <div className="form-group">
                                    <label className="form-label">Date</label>
                                    <input 
                                        type="date"
                                        className="form-input"
                                        value={formDate}
                                        onChange={(e) => setFormDate(e.target.value)}
                                    />
                                </div>

                                <div className="form-group">
                                    <label style={{display: 'flex', alignItems: 'center', gap: '10px'}}>
                                        <input 
                                            type="checkbox"
                                            checked={formIsRestDay}
                                            onChange={(e) => setFormIsRestDay(e.target.checked)}
                                        />
                                        <span>This was a rest day</span>
                                    </label>
                                </div>

                                {!formIsRestDay && (
                                    <>
                                        <div className="form-group">
                                            <label className="form-label">Rounds Completed</label>
                                            <input 
                                                type="number"
                                                className="form-input"
                                                value={formRounds}
                                                onChange={(e) => setFormRounds(e.target.value)}
                                                min="1"
                                                max="10"
                                            />
                                        </div>

                                        <div className="form-group">
                                            <label className="form-label">Duration (minutes)</label>
                                            <input 
                                                type="number"
                                                className="form-input"
                                                value={formDuration}
                                                onChange={(e) => setFormDuration(e.target.value)}
                                                min="1"
                                                max="120"
                                            />
                                        </div>

                                        <div className="form-group">
                                            <label style={{display: 'flex', alignItems: 'center', gap: '10px'}}>
                                                <input 
                                                    type="checkbox"
                                                    checked={formCoreFinisher}
                                                    onChange={(e) => setFormCoreFinisher(e.target.checked)}
                                                />
                                                <span>Core finisher included</span>
                                            </label>
                                        </div>
                                    </>
                                )}

                                <button 
                                    className="btn btn-primary"
                                    onClick={addManualWorkout}
                                    style={{width: '100%', marginTop: '15px'}}
                                >
                                    Save Workout
                                </button>
                            </div>
                        )}
                    </div>

                    <div className="card">
                        <h3 style={{marginBottom: '15px'}}>All Workouts ({workoutHistory.length})</h3>
                        {sortedHistory.length === 0 ? (
                            <p style={{color: 'var(--text-secondary)', textAlign: 'center', padding: '20px'}}>
                                No workouts logged yet
                            </p>
                        ) : (
                            sortedHistory.map((workout, idx) => {
                                const originalIndex = workoutHistory.indexOf(workout);
                                const workoutDate = new Date(workout.date);
                                const dateStr = workoutDate.toLocaleDateString('en-US', { 
                                    month: 'short', 
                                    day: 'numeric', 
                                    year: 'numeric' 
                                });

                                return (
                                    <div 
                                        key={idx}
                                        style={{
                                            padding: '15px',
                                            background: 'var(--bg-secondary)',
                                            borderRadius: '8px',
                                            marginBottom: '10px',
                                            border: '1px solid var(--border)'
                                        }}
                                    >
                                        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start'}}>
                                            <div style={{flex: 1}}>
                                                <div style={{fontWeight: 'bold', marginBottom: '5px'}}>{dateStr}</div>
                                                {workout.isRestDay ? (
                                                    <div style={{color: '#f59e0b'}}>Rest Day</div>
                                                ) : (
                                                    <>
                                                        <div style={{color: 'var(--text-secondary)', fontSize: '14px'}}>
                                                            {workout.completedRounds || workout.totalRounds} rounds
                                                            {workout.coreFinisher && ' + Core'}
                                                            {workout.duration && `  ${workout.duration} min`}
                                                        </div>
                                                        {workout.isComplete === false && (
                                                            <div style={{color: '#f59e0b', fontSize: '12px', marginTop: '5px'}}>
                                                                Incomplete
                                                            </div>
                                                        )}
                                                    </>
                                                )}
                                            </div>
                                            <button
                                                onClick={() => deleteWorkout(originalIndex)}
                                                style={{
                                                    background: 'none',
                                                    border: 'none',
                                                    color: '#ef4444',
                                                    fontSize: '20px',
                                                    cursor: 'pointer',
                                                    padding: '5px 10px'
                                                }}
                                            >
                                                
                                            </button>
                                        </div>
                                    </div>
                                );
                            })
                        )}
                    </div>
                </div>
            );
        }

        // Render the main App
        ReactDOM.render(<App />, document.getElementById('auth-screen'));
    </script>
</body>
</html>